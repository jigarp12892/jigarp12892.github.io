---
title: 'Monitoring and prediction of porosity in laser powder bed fusion using physics-informed meltpool signatures and machine learning: AÂ summary'
date: 2022-08-08
permalink: /posts/2012/08/blog-post-2/
tags:
  - paper summary
  - 3dprinting
  - laser
  - additive manufacturing
  - machine learning
---

This article is a quick summary of an article published by Smoqi et al, in the Journal of Materials Processing Technology. 

### Introduction:

This paper attempts to demonstrate the effectiveness of physics informed machine learning in predicting crack formation (or the lack there of) in Laser Powder Bed Fusion, which is a laser-based metal 3D printing process.

In this process, a laser beam selectively melts regions of a bed of metal powder, and if the melting and subsequent cooling happens as desired, then it results in a fused metal component.

For those unfamiliar with L-PBF, here's is a 1 minute introduction:

[Quick intro to L-PBF](https://youtu.be/r8_M995cwAA?t=34)



As you can imagine, the point where the laser beam meets the powder bed is the critical region. That's where the melt-pool is created, which is highly transient and it's effective formation, movement and subsequent cooling defines the success of the final part. 

[Simulation of melt-pools in L-PBF](https://www.youtube.com/watch?v=IogJ0xujy_4)



### The idea:

The idea behind this paper continues on the recent trend in physics informed machine learning. The authors of this paper use the idea of extracting physically intuitive signatures from pyrometer images. The novelty of this research is the interpretability and dimensionality reduction that their feature extraction enables: each 370 x 384 pixel image (~103,680 features) is reduced to simply 4 features (Meltpool Length, Mean Ejecta Spread, Mean Ejecta Temperature, and Distribution of Meltpool Temperature). They use these for features to perform two machine learning tasks : classify type and severity of porosity.

### Data collection:

The authors collected meltpool pyrometry images from a single build. The build consisted of one component, a large cuboid (10 mm x 10 mm x 137 mm, yes that is large for L-PBF) made out of ATI 718Plus powder, which is like a fancy version Inconel 718 powder ðŸ˜Š.

The authors vary two process parameters during the build, laser power (P) and scanning speed (v). I mean, they are the big ones out of a possible 130 or so. The authors varied these parts during the build so they could create different types of porosity, which is what they want their machine learning model to be able to predict (read: classify)

So, **why build one giant part with parameter variations instead of a bunch of small parts with parameter variations between them?** Well, their idea was: location of a part on the build plate is also a factor. And since they don't want to consider that factor for this study, best to just build one giant part. 

### Data Preparation:

The authors collected 22,400 instances of data from the build, which is 22,400 pyrometry images which were reduced to 22,400 sets of 4 physics informed features. To extract the features, first the meltpool body and ejecta were separated in the images.  The details of how the features were extracted are explained in the full text of the paper. 

Two features, meltpool length and mean ejecta spread are shape based features. The other two features, meltpool temperature distribution and Mean ejecta temperature are temperature based features. 

![On the left, the raw image of a meltpool, and on the right, a) shows schematic of meltpool temperature distribution, b) shows ejecta mean temperature, c) meltpool length and d) mean ejecta spread.](2022-08-08-15-53-12.png)

On the left, the raw image of a meltpool, and on the right, a) shows schematic of meltpool temperature distribution, b) shows ejecta mean temperature, c) meltpool length and d) mean ejecta spread.

## The machine learning tasks:

### Type of porosity

The authors reported three metrics for this task, F1-score, False Positive Rate an False Negative Rate. Out of the different models they tried, K-nearest neighbors gave the highest F1-score, outperforming even a Convolutional Neural Network. The CNN attempts to abstract directly from raw images instead of the physics informed features. The two errors rate are also less than 3% for the KNN model. 

### Severity of porosity

The authors attempted to classify porosity into different levels of severity. For instance, two-level scale would be good-bad. But three level scale would be good-okay-bad. And so on so forth. The results show that KNN again outperforms other models, including CNN for all severity level tasks. Table below shows the performance of the KNN model vs others at different severity scales.

| Severity scale | Logistic Regression  | Support Vector Machine | KNN | CNN |
| --- | --- | --- | --- | --- |
|  | F1 score | F1 score | F1 score | F1 score |
| 2-way | 0.82 | 0.84 | 0.97 | 0.97 |
| 3-way | 0.74 | 0.77 | 0.97 | 0.95 |
| 4-way | 0.65 | 0.71 | 0.98 | 0.93 |
| 5-way | 0.60 | 0.64 | 0.97 | 0.89 |

### Conclusion:

So why is this paper cool? Well, I think reducing dimensionality so that we can implement lighter machine learning models that can outperform the cavalry is the way to go. This paper does that very well. It takes a information rich source of raw data, meltpool pyrometry and extracts 4 features which retain enough information to predict porosity well. 

If this can be extended to generalize across different component geometries, materials and other important factors, then such an approach takes us closer to implementing real-time defect detection and control.

Link to full paper: 

[Monitoring and prediction of porosity in laser powder bed fusion using physics-informed meltpool signatures and machine learning](https://www.sciencedirect.com/science/article/pii/S0924013622000620)